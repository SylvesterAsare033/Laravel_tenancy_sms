function blockUI(e="Please wait...",t="orange"){return $.blockUI({message:'<i class="mr-1 m-auto material-symbols-rounded spinner">progress_activity</i> '+e,css:{padding:"3px",color:t,backgroundColor:"rgba(189, 189, 189, 0.05)",border:"none"}})}function unblockUI(){return $.unblockUI()}autosize($("textarea")),$(window).on("load",unblockUI),$(document).ready((function(){$("form.page-block").submit((function(e){blockUI()})),$(".date-pick").datepicker({format:"mm/dd/yyyy",autoclose:!0}),$(".date-pick-day-none").datepicker({format:"M, yyyy",autoclose:!0}),$("select#user_type").on("change",(function(){let e=$(this).parents("fieldset").find("#parent-data"),t=$("#parent-data input"),n=$(".steps ul li.last"),o=$(".actions ul li:last-child"),a=$(".actions ul li:not(:last-child)"),i=$(".wizard > .steps > ul > li.current");if("parent"==$(this).find(":selected").attr("class"))n.hide(),e.show("150"),a.hide(),o.show(),i.addClass("d-li-current-none"),t.removeAttr("disabled");else{n.show(),e.hide("150"),a.show(),o.hide(),i.removeClass("d-li-current-none"),t.attr("disabled","true");const s=$(".wizard>.actions>ul>li + li");s.hasClass("disabled")&&s.removeClass("disabled").removeAttr("disabled").children("a").removeClass("disabled")}}));const e=$(".items-wrapper");function t(e){return $(e).removeClass("spinner")}function n(e){return $(e).addClass("is-invalid").siblings(".invalid-feedback").children("span").text("This field is required")}function o(e){return $(e).removeClass("is-invalid")}function a(e){return""===$(e).val()}$(document).on("click","#add-item",(function(t){t.preventDefault();var n=$(this).siblings("input").val();if(n<0)for(let t=0;t>n;t--){let t=e.find(".item");if(1===t.length)return;t.last().remove()}else for(let t=0;t<n;t++){let t=$(".item:first").clone(!1,!1).appendTo(e);t.find(".item-input").val(""),t.find(".item-output").text(""),t.find(".icon-close").show(250),t.find(".item-copy").prop("disabled",!0)}})),$(document).on("click",".item-copy",(function(e){e.preventDefault();var t=$(this).siblings(".item-output");let n="";t.each((function(e,t){n+=$(t).text()+"\n"})),text=n.trim(),function(e,t){if(navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{n(t,"Copied")}),(e=>{n(t,"Failed! Try copying manually")}));else{const o=$("<textarea>").val(e).appendTo("body").select();try{document.execCommand("copy"),n(t,"Copied")}catch(e){n(t,"Failed! Try copying manually")}o.remove()}function n(e,t){$(e).attr("data-original-title",t).tooltip("show")}$(t).on("mouseleave",(function(){$(t).attr("data-original-title",$(this).data("title")??"Copy").tooltip("hide")}))}(text,this)})),$(document).on("click","#btn-convert",(function(e){var i;i=this.children,$(i).addClass("spinner");var s=$("#from-out-of"),l=$("#to-out-of"),r=$(".item-input");if(c=l,a(d=s)||a(c)?(a(d)?n(d):o(d),a(c)?n(c):o(c),0):(o(d),o(c),1)){var d,c,u=s.val(),p=l.val();r.each((function(e,t){let i=$(this).parent().siblings().find(".item-output"),s=$(this).parent().siblings().find(".item-copy");(function(e,t){a(e)&&n(e);if(!a(e)){if(!(parseInt($(e).val())>parseInt(t)))return o(e),!0;!function(e,t){$(e).addClass("is-invalid").siblings(".invalid-feedback").children("span").text(t)}(e,"The mark must not be greater than "+t)}})(this,u)&&(i.text(function(e,t,n){let o=e/t*n;return Math.round(o)}($(this).val(),u,p)),s.prop("disabled",!1))})),t(this.children)}else t(this.children)})),$(document).on("input","input",(function(e){a(this)?$(this).addClass("is-invalid"):o(this)}))})),$(".full-screen-handle").on("click",(function(e){e.preventDefault(),document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT),$(this).find("a").text("fullscreen_exit").attr("title","Exit Full Screen")):(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),$(this).find("a").text("fullscreen").attr("title","Request Full Screen"))}));const counterUp=window.counterUp.default,callback=e=>{e.forEach((e=>{const t=e.target;e.isIntersecting&&!t.classList.contains("is-visible")&&(counterUp(t,{duration:2e3,delay:16}),t.classList.add("is-visible"))}))},IO=new IntersectionObserver(callback,{threshold:1});var elements=document.querySelectorAll(".counter");function initializePopover(){return $('[data-toggle="popover"]').popover()}function initializeTooltip(){return $('[data-toggle="tooltip"]').tooltip()}function hideAllPopover(){return $('[data-toggle="popover"]').popover("hide")}function enableElement(e){$(e).prop("disabled",!1)}function disableElement(e){$(e).prop("disabled",!0)}function updateSectionDisableState(){return $("#students-ids").val().length?disableElement("#sec_id_add_not_applicable"):enableElement("#sec_id_add_not_applicable")}function hide(e,t=0){$(e).hide(t)}function show(e,t=0){$(e).show(t)}function showFormCard(){show(".card#create-message",500),hide("button#new-message",50)}function hideFormCard(){hide(".card#create-message",150),show("button#new-message",250)}function toggleElementDisabledState(e,t){e.length?$(t).attr("disabled",!0):$(t).attr("disabled",!1)}function validateStudentsSelection(e){var t=$(e).val();let n=0;t.forEach((function(e){0!=e&&1!=e&&"students"!=e||n++})),n>1&&($("#user_types-ids").val("").trigger("change"),pop({msg:"Please, select only one option under students user type group.",type:"info"}))}function appendEditableOption(e=".has-editable-option"){$(e).siblings("input.edit-option").remove(),$(e).append('<option class="editable" value="other">Other</option>').attr("onchange","handleEditableOption(this);").parent().append('<input class="form-control edit-option display-none text-capitalize" placeholder="Please Specify">')}function handleEditableOption(e){"editable"==$(e).children("option:selected",this).attr("class")?($(e).siblings(".edit-option").show(150),$(".edit-option").keyup((function(){let t=$(e).siblings(".edit-option").val();$(e).children("option.editable").val(t),$(e).children("option.editable").html(t)}))):$(e).siblings(".edit-option").hide()}elements.forEach((e=>{IO.observe(e)})),initializePopover(),initializeTooltip(),$(".st-id-checkbox").click((function(){const e=$("form.print-selected");var t=$(":checkbox:checked").length;0===t?e.find("button[type='submit']").attr("disabled","true").addClass("cursor-not-allowed"):e.find("button[type='submit']").removeAttr("disabled").removeClass("cursor-not-allowed"),e.find("#checked-count").html(t)})),$(document).on("change","select#user_types-ids",(function(e){validateStudentsSelection(this)})),$(document).ready((function(){appendEditableOption()})),$("button.opt-all-as-graduate").on("click",(function(e){const t=$(this).siblings("form.page-block");t.find('select option[value="G"]').prop("selected",!0),t.find(".select2-selection__rendered").text("Graduated")}));const do_not_show_again_button=document.createElement("button");function doNotShowAgain(e){$(e).hide();var t=$(e).parents(".has-do-not-show-again-button"),n=$(t).attr("id");if(void 0!==n&&!($("[id="+JSON.stringify(n)+"]").length>1)){removeElement(t);var o=JSON.parse(window.localStorage.getItem("do_not_show_els_with_these_ids_again"))??[];o.push(n),window.localStorage.setItem("do_not_show_els_with_these_ids_again",JSON.stringify(o)),flash({msg:"Done. To view this again, go to <strong>Settings</strong> to reveal all hidden items.",type:"info"})}}function updatedoNotShowAgainElsState(){$(document).ready((function(){(JSON.parse(window.localStorage.getItem("do_not_show_els_with_these_ids_again"))??[]).forEach((function(e){""!=e&&$("#"+e).remove(0)}))}))}function removeElement(e){$(e).animate({height:"0px"},500,(function(){$(e).remove()}))}do_not_show_again_button.type="button",do_not_show_again_button.className="btn btn-sm btn-info pt-0 pb-0 pr-1 pl-1 position-absolute right-0 font-size-xs do-not-show-again",do_not_show_again_button.textContent="Do not show again",do_not_show_again_button.style.bottom="-10px",do_not_show_again_button.setAttribute("onclick","doNotShowAgain(this)"),$(".has-do-not-show-again-button").append(do_not_show_again_button),$("button#clear-do-not-show-again-alert-msgs").click((function(e){Modal.fire({title:"Are you sure?",text:"This will reveal all hidden alert messages.",icon:"warning",confirmButtonText:"Sure",customClass:{confirmButton:"bg-danger"}}).then((e=>{if(e.isConfirmed)return window.localStorage.hasOwnProperty("do_not_show_els_with_these_ids_again")?(window.localStorage.removeItem("do_not_show_els_with_these_ids_again"),flash({msg:"Success. All alert messages are now displayed.",type:"success"})):flash({msg:"Nothing to reveal; all alert messages are on display.",type:"info"})}))})),updatedoNotShowAgainElsState();const go_to_bottom_btn=$(".go-to-bottom button");function playNotificationSound(e,t=!1){if(t&&1===$(error_sound).data("allow_system_sounds")){new Audio(`${$(error_sound).data("base_url")}/${e}`).play()}}go_to_bottom_btn.on("click",(function(e){e.preventDefault(),scrollToBottom()})),$(window).scroll((function(){var e=$(window).scrollTop()+$(window).height();(document.scrollingElement||document.body).scrollHeight-300<e?go_to_bottom_btn.fadeOut():go_to_bottom_btn.fadeIn()})),$(document).on("change","select#class-type",(function(e){let t=this.value;$(".number-formats div").removeClass("d-flex").addClass("d-none"),$(".number-format-"+t).removeClass("d-none").addClass("d-flex")})),$(document).on("change","select#category",(function(e){let t=this.value,n=$(this).data("summative_exm_cat_ids");if(n){return Object.values(n).includes(parseInt(t))?$(".ca-setup").show(150).find("input[type='number']").attr("required","required"):$(".ca-setup").hide(150).find("input[type='number']").removeAttr("required")}}));const error_sound=document.getElementById("notification-sounds");$(document).on("input","table.data-table input",(function(e){var t=parseFloat($(this).attr("max")),n=parseFloat($(this).val()),o=$(this).attr("name");return $("table.data-table input").removeAttr("style").removeClass("is-invalid"),n>t?(playNotificationSound("error-call-to-attention.mp3",!0),sessionStorage.setItem(o,""),$(this).val("").blur().attr("style","border: 1px solid rgb(151, 23, 23) !important")):sessionStorage.setItem(o,n)}));const page_accessed_by_reload=window.performance.getEntriesByType("navigation").map((e=>e.type)).includes("reload");if($("table.data-table input").length>0&&page_accessed_by_reload)for(let e in sessionStorage)sessionStorage.hasOwnProperty(e)&&(e.startsWith("cw_")||e.startsWith("hw_")||e.startsWith("tt_"))&&$(".ca-tbody").find('input[name="'+e+'"]').val(sessionStorage[e]),sessionStorage.hasOwnProperty(e)&&e.startsWith("exm_")&&$(".exam-tbody").find('input[name="'+e+'"]').val(sessionStorage[e]);var auth_pages_bg_file_input=$("#login-and-related-pgs-bg-input"),auth_pages_preview_btns=$("div.auth-pages-preview");$(auth_pages_bg_file_input).change((function(e){auth_pages_bg_file_input.get(0).files.length>=1?(auth_pages_preview_btns.find("select").prop("disabled",!1),auth_pages_preview_btns.find("input").prop("disabled",!1)):(auth_pages_preview_btns.find("select").prop("disabled",!0),auth_pages_preview_btns.find("input").prop("disabled",!0))})),$(document).on("click",".refresh",(function(e){return $(this).html('<i class="material-symbols-rounded mt-auto mb-auto spinner">refresh</i>'),window.location.reload()})),function(e){"use strict";const t=new Date,n=t.getDate(),o=["January","February","March","April","May","June","July","August","September","October","November","December"];e(document).ready((function(){e(".right-button").click((()=>r(t))),e(".left-button").click((()=>d(t))),e(".month").click((function(){l(e(this),t)})),e("#add-button").click((()=>c(t))),e(".months-row > div").eq(t.getMonth()).addClass("active-month"),a(t);const i=m(n,t.getMonth()+1,t.getFullYear());h(i,o[t.getMonth()],n)}));const a=t=>{const n=e(".tbody"),a=e(".events-container");n.empty(),a.empty();const l=t.getMonth(),r=t.getFullYear(),d=i(l,r),c=t.getDate();t.setDate(1);const u=t.getDay();let p=e("<tr class='table-row'></tr>");for(let t=0;t<35+u;t++){const a=t-u+1,i=e("<td class='table-date'></td>");if(t%7==0&&(n.append(p),p=e("<tr class='table-row'></tr>")),t<u||a>d)i.addClass("nil");else{i.text(a);const t=m(a,l+1,r);c===a&&0===e(".active-date").length&&(i.addClass("active-date"),h(t,o[l],a)),0!==t.length&&i.addClass("event-date"),i.click((e=>s(t,o[l],a,e)))}p.append(i)}n.append(p),e(".year").text(r)},i=(e,t)=>{const n=new Date(t,e,1);return(new Date(t,e+1,1)-n)/864e5},s=(t,n,o,a)=>{e(".events-container").show(250),e("#dialog").hide(250),e(".active-date").removeClass("active-date"),e(a.target).addClass("active-date"),h(t,n,o)},l=(t,n)=>{e(".events-container").show(250),e("#dialog").hide(250),e(".active-month").removeClass("active-month"),t.addClass("active-month");const o=e(".month").index(t);n.setMonth(o),a(n)},r=t=>{e("#dialog").hide(250);const n=t.getFullYear()+1;e(".year").text(n),t.setFullYear(n),a(t)},d=t=>{e("#dialog").hide(250);const n=t.getFullYear()-1;e(".year").text(n),t.setFullYear(n),a(t)},c=t=>{0!==e(".active-date").length&&(e("input").click((function(){e(this).removeClass("error-input")})),e("#dialog input[type=text]").val(""),e("#dialog input[type=textarea]").val(""),e(".events-container").hide(250),e("#dialog").show(250),e("#cancel-button").click((()=>{e("#name").removeClass("error-input"),e("#count").removeClass("error-input"),e("#dialog").hide(250),e(".events-container").show(250)})),e("#ok-button").off().click((()=>{const n=e("#name").val().trim(),o=e("#count").val().trim(),i=parseInt(e(".active-date").text());0===n.length?e("#name").addClass("error-input"):0===o.length?e("#count").addClass("error-input"):(e("#dialog").hide(250),u(n,o,t,i),t.setDate(i),a(t))})))},u=(e,t,n,o)=>{const a={name:e,description:t,year:n.getFullYear(),month:n.getMonth()+1,day:o};events_data.events.push(a),p(a)},p=t=>{e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")}}),e.ajax({type:"POST",url:event_create_url,dataType:"json",data:t,success:t=>{e(".events-container").html(t.msg).addClass("text-green")},error:t=>{e(".events-container").text("Something went wrong. Event add failed!").addClass("text-danger")}})},h=(t,n,o)=>{if(e(".events-container").empty().show(250),0===t.length){const t=e("<div class='event-card'></div>"),a=e("<div class='event-name'>There are no Events Planned for "+n+" "+o+".</div>");t.css({"border-left":"10px solid #FF1744"}).append(a),e(".events-container").append(t)}else t.forEach((t=>{const n=e("<div class='event-card'></div>"),o=e("<div class='event-name'>"+t.name+":</div>"),a=e("<div class='event-description pl-1'>"+t.description+".</div>");let i;switch(t.status){case"cancelled":i=e("<div class='event-cancelled text-danger pl-1'>(Cancelled)</div>");break;case"active":i=e("<div class='event-active text-orange pl-1'>(Active now)</div>");break;case"completed":i=e("<div class='event-completed text-success pl-1'>(Completed)</div>");break;default:i="";break}n.append(o).append(i).append(a),e(".events-container").append(n)}))},m=(e,t,n)=>"undefined"!=typeof events_data?events_data.events.filter((o=>o.day===e&&o.month===t&&o.year===n)):[]}(jQuery);